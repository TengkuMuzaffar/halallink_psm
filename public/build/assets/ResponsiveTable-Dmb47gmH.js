import{_ as Q,r as b,p as R,A as P,c as r,b as v,a,w as L,v as A,t as f,G as C,B as U,g as q,F as p,i as w,C as x,d as F,o as i,e as T}from"./main-6TRAM3lj.js";import{L as z}from"./LoadingSpinner-Bs7tkB0U.js";const j={name:"ResponsiveTable",components:{LoadingSpinner:z},props:{columns:{type:Array,required:!0},items:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},hasActions:{type:Boolean,default:!0},itemKey:{type:String,default:"id"},showFilters:{type:Boolean,default:!0},showPagination:{type:Boolean,default:!0},perPage:{type:Number,default:10},serverSide:{type:Boolean,default:!1},showMinMaxFilters:{type:Boolean,default:!1},minLabel:{type:String,default:"Min"},maxLabel:{type:String,default:"Max"},minPlaceholder:{type:String,default:"Min"},maxPlaceholder:{type:String,default:"Max"},searchPlaceholder:{type:String,default:"Search..."},minMaxField:{type:String,default:""}},setup(o,{emit:n}){const l=b(""),e=b(""),k=b("");let I=null;const V=()=>{clearTimeout(I),I=setTimeout(()=>{n("search",l.value)},500)},t=()=>{n("min-max-change",{min:e.value===""?null:e.value,max:k.value===""?null:k.value,field:o.minMaxField})},c=b(""),d=b("asc"),_=b(1);R([()=>o.items,l],()=>{_.value=1});const M=P(()=>{if(o.serverSide)return o.items;let s=[...o.items];if(l.value){const h=l.value.toLowerCase();s=s.filter(u=>o.columns.some(g=>{const m=S(u,g.key);return m&&String(m).toLowerCase().includes(h)}))}return c.value&&s.sort((h,u)=>{const g=S(h,c.value),m=S(u,c.value);return typeof g=="string"&&typeof m=="string"?d.value==="asc"?g.localeCompare(m):m.localeCompare(g):d.value==="asc"?g-m:m-g}),s}),S=(s,h)=>h.includes(".")?h.split(".").reduce((u,g)=>u&&u[g],s):s[h],N=(s,h)=>s[o.itemKey]||h,K=P(()=>o.serverSide||!o.showPagination?M.value:M.value.slice(B.value,B.value+o.perPage)),y=P(()=>Math.ceil(M.value.length/o.perPage)),B=P(()=>(_.value-1)*o.perPage),D=P(()=>{const s=[];if(y.value<=5)for(let u=1;u<=y.value;u++)s.push(u);else{let u=Math.max(1,_.value-Math.floor(2.5)),g=Math.min(y.value,u+5-1);g===y.value&&(u=Math.max(1,g-5+1));for(let m=u;m<=g;m++)s.push(m)}return s});return{searchQuery:l,minValue:e,maxValue:k,sortKey:c,sortDirection:d,currentPage:_,filteredItems:M,paginatedItems:K,totalPages:y,paginationStart:B,pageNumbers:D,getItemValue:S,getItemKey:N,sortBy:s=>{c.value===s?d.value=d.value==="asc"?"desc":"asc":(c.value=s,d.value="asc"),n("sort",{key:s,direction:d.value})},getSortIconClass:s=>c.value!==s?"fa-sort":d.value==="asc"?"fa-sort-up":"fa-sort-down",changePage:s=>{s<1||s>y.value||(_.value=s,n("page-change",s))},onSearchInput:V,onMinMaxChange:t}}},E={class:"responsive-table"},G={key:0,class:"table-filters mb-3 d-flex flex-wrap justify-content-between align-items-center"},H={class:"search-wrapper mb-2 mb-md-0"},J={class:"input-group"},O=["placeholder"],W={key:0,class:"min-max-filters d-flex"},X={class:"input-group me-2"},Y={class:"input-group-text"},Z=["placeholder"],$={class:"input-group"},ee={class:"input-group-text"},te=["placeholder"],ae={class:"custom-filters"},ne={class:"table-responsive position-relative"},le={class:"table table-hover"},se=["onClick"],oe={key:0,class:"sort-icon"},ie={key:0,class:"actions-column"},re={key:0},ue=["colspan"],ce={key:0,class:"actions-column"},de={key:1,class:"d-flex justify-content-between align-items-center mt-3"},ge={class:"text-muted"},me={"aria-label":"Table pagination"},he={class:"pagination mb-0"},fe=["onClick"];function ve(o,n,l,e,k,I){const V=q("LoadingSpinner");return i(),r("div",E,[l.showFilters?(i(),r("div",G,[a("div",H,[a("div",J,[n[8]||(n[8]=a("span",{class:"input-group-text"},[a("i",{class:"fas fa-search"})],-1)),L(a("input",{type:"text",class:"form-control",placeholder:l.searchPlaceholder,"onUpdate:modelValue":n[0]||(n[0]=t=>e.searchQuery=t),onInput:n[1]||(n[1]=(...t)=>e.onSearchInput&&e.onSearchInput(...t))},null,40,O),[[A,e.searchQuery]])])]),l.showMinMaxFilters?(i(),r("div",W,[a("div",X,[a("span",Y,f(l.minLabel),1),L(a("input",{type:"number",class:"form-control",placeholder:l.minPlaceholder,"onUpdate:modelValue":n[2]||(n[2]=t=>e.minValue=t),onChange:n[3]||(n[3]=(...t)=>e.onMinMaxChange&&e.onMinMaxChange(...t))},null,40,Z),[[A,e.minValue,void 0,{number:!0}]])]),a("div",$,[a("span",ee,f(l.maxLabel),1),L(a("input",{type:"number",class:"form-control",placeholder:l.maxPlaceholder,"onUpdate:modelValue":n[4]||(n[4]=t=>e.maxValue=t),onChange:n[5]||(n[5]=(...t)=>e.onMinMaxChange&&e.onMinMaxChange(...t))},null,40,te),[[A,e.maxValue,void 0,{number:!0}]])])])):v("",!0),a("div",ae,[C(o.$slots,"filters",{},void 0,!0)])])):v("",!0),a("div",ne,[l.loading?(i(),U(V,{key:0,overlay:"",size:"md",message:"Loading data..."})):v("",!0),a("table",le,[a("thead",null,[a("tr",null,[(i(!0),r(p,null,w(l.columns,t=>(i(),r("th",{key:t.key,class:x([t.class,t.sortable?"sortable":""]),onClick:c=>t.sortable?e.sortBy(t.key):null},[T(f(t.label)+" ",1),t.sortable?(i(),r("span",oe,[a("i",{class:x(["fas",e.getSortIconClass(t.key)])},null,2)])):v("",!0)],10,se))),128)),l.hasActions?(i(),r("th",ie,"Actions")):v("",!0)])]),a("tbody",null,[e.paginatedItems.length===0&&!l.loading?(i(),r("tr",re,[a("td",{colspan:l.hasActions?l.columns.length+1:l.columns.length,class:"text-center py-4"},[C(o.$slots,"empty",{},()=>[n[9]||(n[9]=a("div",{class:"text-muted"},"No data available",-1))],!0)],8,ue)])):(i(!0),r(p,{key:1},w(e.paginatedItems,(t,c)=>(i(),r("tr",{key:e.getItemKey(t,c)},[(i(!0),r(p,null,w(l.columns,d=>(i(),r("td",{key:d.key,class:x(d.class)},[C(o.$slots,d.key,{item:t,index:c},()=>[T(f(e.getItemValue(t,d.key)),1)],!0)],2))),128)),l.hasActions?(i(),r("td",ce,[C(o.$slots,"actions",{item:t,index:c},void 0,!0)])):v("",!0)]))),128))])])]),l.showPagination&&e.filteredItems.length>0?(i(),r("div",de,[a("div",null,[a("span",ge,"Showing "+f(e.paginationStart+1)+" to "+f(Math.min(e.paginationStart+l.perPage,e.filteredItems.length))+" of "+f(e.filteredItems.length)+" entries",1)]),a("nav",me,[a("ul",he,[a("li",{class:x(["page-item",{disabled:e.currentPage===1}])},[a("a",{class:"page-link",href:"#",onClick:n[6]||(n[6]=F(t=>e.changePage(e.currentPage-1),["prevent"]))},n[10]||(n[10]=[a("i",{class:"fas fa-chevron-left"},null,-1)]))],2),(i(!0),r(p,null,w(e.pageNumbers,t=>(i(),r("li",{key:t,class:x(["page-item",{active:e.currentPage===t}])},[a("a",{class:"page-link",href:"#",onClick:F(c=>e.changePage(t),["prevent"])},f(t),9,fe)],2))),128)),a("li",{class:x(["page-item",{disabled:e.currentPage===e.totalPages}])},[a("a",{class:"page-link",href:"#",onClick:n[7]||(n[7]=F(t=>e.changePage(e.currentPage+1),["prevent"]))},n[11]||(n[11]=[a("i",{class:"fas fa-chevron-right"},null,-1)]))],2)])])])):v("",!0)])}const ke=Q(j,[["render",ve],["__scopeId","data-v-fd9963d9"]]);export{ke as R};
