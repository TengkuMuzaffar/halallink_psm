import{P as I,_ as is,c as i,a as s,f as w,g as B,e as k,b as u,t as n,E as N,C as R,w as rs,v as ds,F as cs,i as ms,r as b,m as us,n as bs,O as M,o as r}from"./main-6TRAM3lj.js";import{S as vs}from"./StatsCard-CQZ5Yey2.js";import{R as fs}from"./ResponsiveTable-Dmb47gmH.js";import{L as ks}from"./LoadingSpinner-Bs7tkB0U.js";const T={fetchTasks(c={}){return I("/api/tasks",{params:c})},fetchTaskStats(){return I("/api/tasks/stats")},getTaskById(c){return I(`/api/tasks/${c}`)},updateTask(c,e){return I(`/api/tasks/${c}`,{method:"put",data:e})},searchSlaughterers(c="",e=null){const m={};return c&&(m.search=c),e&&(m.company_id=e),I("/api/slaughterers/search",{params:m})},verifyTaskUser(c){return I(`/api/tasks/${c}/verify/user`)}},_s={name:"TaskManagementPage",components:{StatsCard:vs,ResponsiveTable:fs,LoadingSpinner:ks},setup(){const c=b(!0),e=b(null),m=b([]),t=b({total:0,completed:0,pending:0,in_progress:0}),d=b(null),A=b(""),f=b([]),U=b(!1),y=b(null),o=b(null),E=[{key:"deliveryID",label:"Delivery ID",sortable:!0},{key:"orderID",label:"Order ID",sortable:!0},{key:"item_name",label:"Item Name",sortable:!0},{key:"task_status",label:"Status",sortable:!0}],D=b({current_page:1,per_page:10,total:0});let C=null;const F=b(""),H=b("start_timestamp"),L=b("asc");let v=null,h=null,S=null,x=null;const g=async()=>{c.value=!0,e.value=null;try{const a={page:D.value.current_page,search:F.value,sort_by:H.value,sort_direction:L.value},l=await T.fetchTasks(a);m.value=l.data,D.value={current_page:l.current_page,per_page:l.per_page,total:l.total},j()}catch(a){console.error("Error fetching tasks:",a),e.value="Failed to load tasks. Please try again."}finally{c.value=!1}},j=()=>{const a=m.value.filter(p=>p.task_status==="completed").length,l=m.value.filter(p=>p.task_status==="pending").length,_=m.value.filter(p=>p.task_status==="in_progress").length;t.value={total:m.value.length,completed:a,pending:l,in_progress:_}},q=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",z=a=>{switch(a){case"completed":return"bg-success";case"in_progress":return"bg-primary";case"pending":return"bg-warning";default:return"bg-secondary"}},Y=a=>{F.value=a,D.value.current_page=1,g()},G=({key:a,direction:l})=>{H.value=a,L.value=l,g()},J=a=>{D.value.current_page=a,g()},K=async a=>{d.value=a,v||(v=new M(document.getElementById("taskDetailsModal")));try{const l=await T.verifyTaskUser(a.taskID);l.success===!1&&l.assigned_user&&(d.value.userID=l.assigned_user.userID,d.value.user_name=l.assigned_user.fullname,d.value.user_email=l.assigned_user.email)}catch(l){console.error("Error verifying task user:",l),d.value.assignButtonDisabled=!0}v.show()},O=()=>{v.hide(),h||(h=new M(document.getElementById("startTaskConfirmModal"))),h.show()},W=()=>{v.hide(),S||(S=new M(document.getElementById("completeTaskConfirmModal"))),S.show()},X=()=>{h.hide(),setTimeout(()=>{v.show()},500)},Z=()=>{S.hide(),setTimeout(()=>{v.show()},500)},$=async()=>{var a,l;try{if(!d.value.userID){h.hide(),P();return}const _=await T.updateTask(d.value.taskID,{task_status:"in_progress",start_timestamp:new Date().toISOString()});h.hide(),await g(),setTimeout(()=>{const p=m.value.find(ns=>ns.taskID===d.value.taskID);p&&(d.value=p),v.show()},500)}catch(_){((l=(a=_.response)==null?void 0:a.data)==null?void 0:l.error)==="NO_USER_ASSIGNED"?(h.hide(),P()):(console.error("Error starting task:",_),alert("Failed to start task. Please try again."),h.hide())}},ss=async()=>{try{const a=await T.updateTask(d.value.taskID,{task_status:"completed",finish_timestamp:new Date().toISOString()});S.hide(),await g(),setTimeout(()=>{const l=m.value.find(_=>_.taskID===d.value.taskID);l&&(d.value=l),v.show()},500)}catch(a){console.error("Error completing task:",a),alert("Failed to complete task. Please try again."),S.hide()}},Q=async()=>{U.value=!0,f.value=[];try{const a=await T.searchSlaughterers(A.value);a.success&&a.data?f.value=a.data:(console.error("Failed to search users:",a),f.value=[])}catch(a){console.error("Error searching users:",a),f.value=[]}finally{U.value=!1}},es=a=>{y.value=a.userID,o.value=a},P=async()=>{try{const a=await T.verifyTaskUser(d.value.taskID);if(a.success===!1&&a.assigned_user){alert(a.message),d.value.userID=a.assigned_user.userID,d.value.user_name=a.assigned_user.fullname,d.value.user_email=a.assigned_user.email;return}a.success?(v.hide(),A.value="",f.value=[],y.value=null,o.value=null,x||(x=new M(document.getElementById("assignUserModal"))),x.show(),Q()):alert(a.message)}catch(a){console.error("Error verifying task user:",a),d.value.assignButtonDisabled=!0,alert("Failed to verify task assignment status. The assign button has been disabled.")}},ts=()=>{x.hide(),setTimeout(()=>{v.show()},500)},as=async()=>{if(y.value)try{const a=await T.updateTask(d.value.taskID,{userID:y.value});x.hide(),await g(),setTimeout(()=>{const l=m.value.find(_=>_.taskID===d.value.taskID);l&&(l.user_name=o.value.fullname||o.value.name,l.user_email=o.value.email,d.value=l),d.value.start_timestamp?v.show():O()},500)}catch(a){console.error("Error assigning user:",a),alert("Failed to assign user. Please try again."),x.hide()}},V=async()=>{if(!c.value){D.value.current_page=1,e.value=null,c.value=!0;try{await g()}catch(a){console.error("Error refreshing tasks:",a),e.value="Failed to refresh tasks. Please try again."}finally{c.value=!1}}},os=()=>{C&&clearInterval(C),C=setInterval(()=>{c.value||V()},2e4)},ls=()=>{C&&(clearInterval(C),C=null)};return us(()=>{g(),os()}),bs(()=>{ls()}),{loading:c,error:e,tasks:m,taskStats:t,columns:E,pagination:D,selectedTask:d,formatDate:q,getStatusClass:z,handleSearch:Y,handleSort:G,handlePageChange:J,viewTaskDetails:K,openStartConfirmation:O,openCompleteConfirmation:W,cancelStartTask:X,cancelCompleteTask:Z,confirmStartTask:$,confirmCompleteTask:ss,refreshData:V,userSearchQuery:A,userSearchResults:f,searchingUsers:U,selectedUserId:y,searchUsers:Q,selectUser:es,openAssignUserModal:P,cancelAssignUser:ts,confirmAssignUser:as}}},hs={class:"task-management-page"},gs={class:"row mb-4"},ps={class:"col-md-3 col-sm-6 mb-3"},ys={class:"col-md-3 col-sm-6 mb-3"},Ts={class:"col-md-3 col-sm-6 mb-3"},Ds={class:"col-md-3 col-sm-6 mb-3"},Cs={class:"card theme-card"},Ss={class:"card-header d-flex justify-content-between align-items-center theme-header"},xs={class:"card-body theme-body"},Is={key:0,class:"alert alert-danger",role:"alert"},ws={class:"position-relative"},Us={key:0,class:"table-loading-overlay"},As={key:1,class:"text-center py-5"},Ns={key:2},Ms=["onClick"],Es={class:"modal fade",id:"taskDetailsModal",tabindex:"-1","aria-hidden":"true"},Ps={class:"modal-dialog modal-lg"},Bs={class:"modal-content theme-modal"},Rs={key:0,class:"modal-body theme-body"},Fs={class:"task-essential-info mb-4"},Hs={class:"d-flex justify-content-between align-items-center mb-3"},Ls={class:"mb-1"},Os={class:"d-flex align-items-center"},Qs={class:"text-muted small"},Vs={class:"task-timeline"},js={key:0,class:"d-flex align-items-center"},qs={class:"small"},zs={key:1,class:"d-flex align-items-center"},Ys={class:"small"},Gs={class:"row"},Js={class:"col-md-6"},Ks={class:"info-item"},Ws={class:"info-value"},Xs={class:"info-item"},Zs={class:"info-value"},$s={class:"col-md-6"},se={class:"info-item"},ee={class:"info-value"},te={key:0,class:"info-item"},ae={class:"info-value"},oe={class:"mt-3 border-top pt-3"},le={class:"d-flex justify-content-between align-items-center mb-2"},ne=["disabled"],ie=["disabled"],re={key:0,class:"d-flex align-items-center"},de={class:"fw-bold"},ce={class:"small text-muted"},me={key:1,class:"text-muted fst-italic"},ue={class:"accordion",id:"taskDetailsAccordion"},be={class:"accordion-item border-0 mb-2"},ve={id:"itemDetailsCollapse",class:"accordion-collapse collapse","aria-labelledby":"itemDetailsHeading","data-bs-parent":"#taskDetailsAccordion"},fe={class:"accordion-body theme-accordion-body"},ke={class:"info-item"},_e={class:"info-value"},he={class:"info-item"},ge={class:"info-value"},pe={key:0,class:"info-item"},ye={class:"info-value"},Te={class:"info-item"},De={class:"info-value text-capitalize"},Ce={class:"accordion-item border-0 mb-2"},Se={id:"supplierCollapse",class:"accordion-collapse collapse","aria-labelledby":"supplierHeading","data-bs-parent":"#taskDetailsAccordion"},xe={class:"accordion-body theme-accordion-body"},Ie={class:"info-item"},we={class:"info-value"},Ue={class:"accordion-item border-0 mb-2"},Ae={id:"timelineCollapse",class:"accordion-collapse collapse","aria-labelledby":"timelineHeading","data-bs-parent":"#taskDetailsAccordion"},Ne={class:"accordion-body theme-accordion-body"},Me={class:"timeline"},Ee={class:"timeline-item"},Pe={class:"timeline-content"},Be={class:"small text-muted mb-0"},Re={key:0,class:"timeline-item"},Fe={class:"timeline-content"},He={class:"small text-muted mb-0"},Le={key:1,class:"timeline-item"},Oe={class:"timeline-content"},Qe={class:"small text-muted mb-0"},Ve={key:2,class:"timeline-item"},je={class:"timeline-content"},qe={class:"small text-muted mb-0"},ze={class:"accordion-item border-0"},Ye={id:"notesCollapse",class:"accordion-collapse collapse","aria-labelledby":"notesHeading","data-bs-parent":"#taskDetailsAccordion"},Ge={class:"accordion-body theme-accordion-body"},Je={class:"mb-0"},Ke={class:"modal-footer theme-footer"},We={class:"modal fade",id:"startTaskConfirmModal",tabindex:"-1","aria-hidden":"true"},Xe={class:"modal-dialog"},Ze={class:"modal-content theme-modal"},$e={class:"modal-footer theme-footer"},st={class:"modal fade",id:"completeTaskConfirmModal",tabindex:"-1","aria-hidden":"true"},et={class:"modal-dialog"},tt={class:"modal-content theme-modal"},at={class:"modal-footer theme-footer"},ot={class:"modal fade",id:"assignUserModal",tabindex:"-1","aria-hidden":"true"},lt={class:"modal-dialog"},nt={class:"modal-content theme-modal"},it={class:"modal-body theme-body"},rt={class:"mb-3"},dt={class:"input-group"},ct={key:0,class:"text-center py-3"},mt={key:1,class:"text-center py-3"},ut={key:2,class:"user-search-results",style:{"max-height":"300px","overflow-y":"auto"}},bt=["onClick"],vt={class:"fw-bold"},ft={class:"small text-muted"},kt={class:"modal-footer theme-footer"},_t=["disabled"];function ht(c,e,m,t,d,A){const f=B("StatsCard"),U=B("LoadingSpinner"),y=B("ResponsiveTable");return r(),i("div",hs,[e[60]||(e[60]=s("h1",{class:"mb-4"},"Task Management",-1)),s("div",gs,[s("div",ps,[w(f,{title:"Total Tasks",count:t.taskStats.total||0,icon:"fas fa-tasks","bg-color":"bg-primary"},null,8,["count"])]),s("div",ys,[w(f,{title:"Pending",count:t.taskStats.pending||0,icon:"fas fa-hourglass-half","bg-color":"bg-warning"},null,8,["count"])]),s("div",Ts,[w(f,{title:"In Progress",count:t.taskStats.in_progress||0,icon:"fas fa-cogs","bg-color":"bg-info"},null,8,["count"])]),s("div",Ds,[w(f,{title:"Completed",count:t.taskStats.completed||0,icon:"fas fa-check-circle","bg-color":"bg-success"},null,8,["count"])])]),s("div",Cs,[s("div",Ss,[e[15]||(e[15]=s("h5",{class:"mb-0"},"Tasks",-1)),s("button",{class:"btn btn-sm theme-btn-outline",onClick:e[0]||(e[0]=(...o)=>t.refreshData&&t.refreshData(...o))},e[14]||(e[14]=[s("i",{class:"fas fa-sync-alt"},null,-1),k(" Refresh ")]))]),s("div",xs,[t.error?(r(),i("div",Is,n(t.error),1)):u("",!0),s("div",ws,[t.loading?(r(),i("div",Us,[w(U)])):u("",!0),!t.tasks||t.tasks.length===0?(r(),i("div",As,e[16]||(e[16]=[s("div",{class:"mb-3"},[s("i",{class:"fas fa-tasks fa-4x text-muted"})],-1),s("h5",{class:"text-muted"},"No tasks found",-1),s("p",{class:"text-muted"},"Try adjusting your filters or check back later.",-1)]))):u("",!0),t.tasks&&t.tasks.length>0?(r(),i("div",Ns,[w(y,{columns:t.columns,items:t.tasks,onSearch:t.handleSearch,onSort:t.handleSort,onPageChange:t.handlePageChange},{task_status:N(({item:o})=>[s("span",{class:R(["badge",t.getStatusClass(o.task_status)])},n(o.task_status),3)]),item_name:N(({item:o})=>[k(n(o.item_name||"N/A"),1)]),actions:N(({item:o})=>[s("button",{class:"btn btn-sm btn-primary",onClick:E=>t.viewTaskDetails(o)},e[17]||(e[17]=[s("i",{class:"fas fa-edit"},null,-1),k(" Edit ")]),8,Ms)]),empty:N(()=>e[18]||(e[18]=[s("div",{class:"text-center py-5"},[s("i",{class:"fas fa-tasks fa-3x text-muted mb-3"}),s("p",null,"No tasks available")],-1)])),_:1},8,["columns","items","onSearch","onSort","onPageChange"])])):u("",!0)]),s("div",Es,[s("div",Ps,[s("div",Bs,[e[49]||(e[49]=s("div",{class:"modal-header theme-header"},[s("h5",{class:"modal-title"},"Task Details"),s("button",{type:"button",class:"btn-close theme-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t.selectedTask?(r(),i("div",Rs,[s("div",Fs,[s("div",Hs,[s("div",null,[s("h4",Ls,n(t.selectedTask.item_name||"Unnamed Task"),1),s("div",Os,[s("span",{class:R(["badge me-2",t.getStatusClass(t.selectedTask.task_status)])},n(t.selectedTask.task_status),3),s("span",Qs,"Task ID: "+n(t.selectedTask.taskID),1)])]),s("div",Vs,[t.selectedTask.start_timestamp?(r(),i("div",js,[e[19]||(e[19]=s("i",{class:"fas fa-play-circle text-primary me-1"},null,-1)),s("span",qs,n(t.formatDate(t.selectedTask.start_timestamp)),1)])):u("",!0),t.selectedTask.finish_timestamp?(r(),i("div",zs,[e[20]||(e[20]=s("i",{class:"fas fa-check-circle text-success me-1"},null,-1)),s("span",Ys,n(t.formatDate(t.selectedTask.finish_timestamp)),1)])):u("",!0)])]),s("div",Gs,[s("div",Js,[s("div",Ks,[e[21]||(e[21]=s("span",{class:"info-label"},"Delivery ID:",-1)),s("span",Ws,n(t.selectedTask.deliveryID||"N/A"),1)]),s("div",Xs,[e[22]||(e[22]=s("span",{class:"info-label"},"Order ID:",-1)),s("span",Zs,n(t.selectedTask.orderID||"N/A"),1)])]),s("div",$s,[s("div",se,[e[23]||(e[23]=s("span",{class:"info-label"},"Quantity:",-1)),s("span",ee,n(t.selectedTask.item_quantity||"N/A"),1)]),t.selectedTask.measurement_value&&t.selectedTask.measurement_type?(r(),i("div",te,[e[24]||(e[24]=s("span",{class:"info-label"},"Measurement:",-1)),s("span",ae,n(t.selectedTask.measurement_value)+" "+n(t.selectedTask.measurement_type),1)])):u("",!0)])]),s("div",oe,[s("div",le,[e[27]||(e[27]=s("h6",{class:"mb-0"},"Assigned To",-1)),t.selectedTask.userID?(r(),i("button",{key:1,class:"btn btn-sm btn-outline-secondary",onClick:e[2]||(e[2]=o=>t.openAssignUserModal()),disabled:t.selectedTask.assignButtonDisabled},e[26]||(e[26]=[s("i",{class:"fas fa-user-edit"},null,-1),k(" Change ")]),8,ie)):(r(),i("button",{key:0,class:"btn btn-sm btn-outline-primary",onClick:e[1]||(e[1]=o=>t.openAssignUserModal()),disabled:t.selectedTask.assignButtonDisabled},e[25]||(e[25]=[s("i",{class:"fas fa-user-plus"},null,-1),k(" Assign ")]),8,ne))]),t.selectedTask.userID&&t.selectedTask.user_name?(r(),i("div",re,[e[28]||(e[28]=s("div",{class:"user-avatar me-2"},[s("i",{class:"fas fa-user-circle fa-2x text-primary"})],-1)),s("div",null,[s("div",de,n(t.selectedTask.user_name),1),s("div",ce,n(t.selectedTask.user_email||"No email available"),1)])])):(r(),i("div",me," No user assigned "))])]),s("div",ue,[s("div",be,[e[33]||(e[33]=s("h2",{class:"accordion-header",id:"itemDetailsHeading"},[s("button",{class:"accordion-button collapsed theme-accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#itemDetailsCollapse","aria-expanded":"false","aria-controls":"itemDetailsCollapse"},[s("i",{class:"fas fa-box me-2"}),k(" Item Details ")])],-1)),s("div",ve,[s("div",fe,[s("div",ke,[e[29]||(e[29]=s("span",{class:"info-label"},"Item Name:",-1)),s("span",_e,n(t.selectedTask.item_name||"N/A"),1)]),s("div",he,[e[30]||(e[30]=s("span",{class:"info-label"},"Quantity:",-1)),s("span",ge,n(t.selectedTask.item_quantity||"N/A"),1)]),t.selectedTask.measurement_value&&t.selectedTask.measurement_type?(r(),i("div",pe,[e[31]||(e[31]=s("span",{class:"info-label"},"Measurement:",-1)),s("span",ye,n(t.selectedTask.measurement_value)+" "+n(t.selectedTask.measurement_type),1)])):u("",!0),s("div",Te,[e[32]||(e[32]=s("span",{class:"info-label"},"Task Type:",-1)),s("span",De,n(t.selectedTask.task_type||"N/A"),1)])])])]),s("div",Ce,[e[35]||(e[35]=s("h2",{class:"accordion-header",id:"supplierHeading"},[s("button",{class:"accordion-button collapsed theme-accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#supplierCollapse","aria-expanded":"false","aria-controls":"supplierCollapse"},[s("i",{class:"fas fa-map-marker-alt me-2"}),k(" Supplier Information ")])],-1)),s("div",Se,[s("div",xe,[s("div",Ie,[e[34]||(e[34]=s("span",{class:"info-label"},"Supplier Address:",-1)),s("span",we,n(t.selectedTask.supplier_address||"No address available"),1)])])])]),s("div",Ue,[e[44]||(e[44]=s("h2",{class:"accordion-header",id:"timelineHeading"},[s("button",{class:"accordion-button collapsed theme-accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#timelineCollapse","aria-expanded":"false","aria-controls":"timelineCollapse"},[s("i",{class:"fas fa-history me-2"}),k(" Timeline ")])],-1)),s("div",Ae,[s("div",Ne,[s("div",Me,[s("div",Ee,[e[37]||(e[37]=s("div",{class:"timeline-icon bg-secondary"},[s("i",{class:"fas fa-plus text-white"})],-1)),s("div",Pe,[e[36]||(e[36]=s("h6",{class:"mb-0"},"Created",-1)),s("p",Be,n(t.formatDate(t.selectedTask.created_at)),1)])]),t.selectedTask.start_timestamp?(r(),i("div",Re,[e[39]||(e[39]=s("div",{class:"timeline-icon bg-primary"},[s("i",{class:"fas fa-play text-white"})],-1)),s("div",Fe,[e[38]||(e[38]=s("h6",{class:"mb-0"},"Started",-1)),s("p",He,n(t.formatDate(t.selectedTask.start_timestamp)),1)])])):u("",!0),t.selectedTask.finish_timestamp?(r(),i("div",Le,[e[41]||(e[41]=s("div",{class:"timeline-icon bg-success"},[s("i",{class:"fas fa-check text-white"})],-1)),s("div",Oe,[e[40]||(e[40]=s("h6",{class:"mb-0"},"Completed",-1)),s("p",Qe,n(t.formatDate(t.selectedTask.finish_timestamp)),1)])])):u("",!0),t.selectedTask.updated_at&&t.selectedTask.updated_at!==t.selectedTask.created_at?(r(),i("div",Ve,[e[43]||(e[43]=s("div",{class:"timeline-icon bg-info"},[s("i",{class:"fas fa-edit text-white"})],-1)),s("div",je,[e[42]||(e[42]=s("h6",{class:"mb-0"},"Last Updated",-1)),s("p",qe,n(t.formatDate(t.selectedTask.updated_at)),1)])])):u("",!0)])])])]),s("div",ze,[e[45]||(e[45]=s("h2",{class:"accordion-header",id:"notesHeading"},[s("button",{class:"accordion-button collapsed theme-accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#notesCollapse","aria-expanded":"false","aria-controls":"notesCollapse"},[s("i",{class:"fas fa-sticky-note me-2"}),k(" Notes ")])],-1)),s("div",Ye,[s("div",Ge,[s("p",Je,n(t.selectedTask.notes||"No notes available"),1)])])])])])):u("",!0),s("div",Ke,[t.selectedTask&&!t.selectedTask.start_timestamp&&!t.selectedTask.finish_timestamp?(r(),i("button",{key:0,type:"button",class:"btn btn-primary theme-btn-primary me-2",onClick:e[3]||(e[3]=o=>t.openStartConfirmation())},e[46]||(e[46]=[s("i",{class:"fas fa-play"},null,-1),k(" Start Task ")]))):u("",!0),t.selectedTask&&t.selectedTask.start_timestamp&&!t.selectedTask.finish_timestamp?(r(),i("button",{key:1,type:"button",class:"btn btn-success me-2",onClick:e[4]||(e[4]=o=>t.openCompleteConfirmation())},e[47]||(e[47]=[s("i",{class:"fas fa-check"},null,-1),k(" Complete Task ")]))):u("",!0),e[48]||(e[48]=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1))])])])]),s("div",We,[s("div",Xe,[s("div",Ze,[e[50]||(e[50]=s("div",{class:"modal-header theme-header"},[s("h5",{class:"modal-title"},"Confirm Start Task"),s("button",{type:"button",class:"btn-close theme-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e[51]||(e[51]=s("div",{class:"modal-body theme-body"},[s("p",null,"Are you sure you want to start this task?")],-1)),s("div",$e,[s("button",{type:"button",class:"btn btn-secondary",onClick:e[5]||(e[5]=o=>t.cancelStartTask())},"No"),s("button",{type:"button",class:"btn btn-primary theme-btn-primary",onClick:e[6]||(e[6]=o=>t.confirmStartTask())},"Yes")])])])]),s("div",st,[s("div",et,[s("div",tt,[e[52]||(e[52]=s("div",{class:"modal-header theme-header"},[s("h5",{class:"modal-title"},"Confirm Complete Task"),s("button",{type:"button",class:"btn-close theme-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e[53]||(e[53]=s("div",{class:"modal-body theme-body"},[s("p",null,"Are you sure you want to complete this task?")],-1)),s("div",at,[s("button",{type:"button",class:"btn btn-secondary",onClick:e[7]||(e[7]=o=>t.cancelCompleteTask())},"No"),s("button",{type:"button",class:"btn btn-success",onClick:e[8]||(e[8]=o=>t.confirmCompleteTask())},"Yes")])])])]),s("div",ot,[s("div",lt,[s("div",nt,[e[59]||(e[59]=s("div",{class:"modal-header theme-header"},[s("h5",{class:"modal-title"},"Assign User to Task"),s("button",{type:"button",class:"btn-close theme-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",it,[s("div",rt,[e[55]||(e[55]=s("label",{for:"userSearch",class:"form-label"},"Search Users",-1)),s("div",dt,[rs(s("input",{type:"text",class:"form-control",id:"userSearch","onUpdate:modelValue":e[9]||(e[9]=o=>t.userSearchQuery=o),onInput:e[10]||(e[10]=(...o)=>t.searchUsers&&t.searchUsers(...o)),placeholder:"Search by name or email"},null,544),[[ds,t.userSearchQuery]]),s("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[11]||(e[11]=(...o)=>t.searchUsers&&t.searchUsers(...o))},e[54]||(e[54]=[s("i",{class:"fas fa-search"},null,-1)]))])]),t.searchingUsers?(r(),i("div",ct,e[56]||(e[56]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)]))):t.userSearchResults.length===0?(r(),i("div",mt,e[57]||(e[57]=[s("p",{class:"text-muted mb-0"},"No users found",-1)]))):(r(),i("div",ut,[(r(!0),i(cs,null,ms(t.userSearchResults,o=>(r(),i("div",{key:o.userID,class:R(["user-search-item p-2 border-bottom d-flex align-items-center",{selected:t.selectedUserId===o.userID}]),onClick:E=>t.selectUser(o)},[e[58]||(e[58]=s("div",{class:"user-avatar me-2"},[s("i",{class:"fas fa-user-circle fa-2x text-primary"})],-1)),s("div",null,[s("div",vt,n(o.fullname||o.name),1),s("div",ft,n(o.email),1)])],10,bt))),128))]))]),s("div",kt,[s("button",{type:"button",class:"btn btn-secondary",onClick:e[12]||(e[12]=o=>t.cancelAssignUser())},"Cancel"),s("button",{type:"button",class:"btn btn-primary theme-btn-primary",onClick:e[13]||(e[13]=o=>t.confirmAssignUser()),disabled:!t.selectedUserId}," Assign ",8,_t)])])])])])])])}const Dt=is(_s,[["render",ht],["__scopeId","data-v-632932d6"]]);export{Dt as default};
