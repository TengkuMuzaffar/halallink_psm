import{_ as M,c as l,a as e,e as y,t as c,r as a,y as P,D as x,u as A,o as d}from"./main-BpaYbEPg.js";import{m as w}from"./marketplaceService-CbDHmkiN.js";import"./modal-ByxZIVwL.js";const T={name:"PaymentStatusPage",setup(){const n=A(),s=x(),u=a(!0),t=a(!1),i=a(""),m=a(""),r=a(""),p=a("");return P(async()=>{try{const o=s.query;console.log("Payment status URL params:",o),o.billcode&&o.order_id&&await w.verifyPayment({billcode:o.billcode,order_id:o.order_id,status_id:o.status_id,transaction_id:o.transaction_id||""});const g=o.success==="true",b=o.message||"",f=o.order_id||"",v=o.reference||"",k=o.transaction_id||"",_=o.amount||"";t.value=g,m.value=f||v||"N/A",r.value=k||"N/A",p.value=_||"N/A",g||(i.value=b||"Payment was not successful. Please try again.")}catch(o){console.error("Error processing payment status:",o),t.value=!1,i.value="An error occurred while processing your payment. Please contact support."}finally{u.value=!1}}),{loading:u,success:t,errorMessage:i,orderReference:m,transactionId:r,amount:p,goToMarketplace:()=>{n.push({name:"Marketplace"})},viewOrders:()=>{n.push({name:"Marketplace"})},tryAgain:()=>{n.push({name:"Marketplace"})}}}},R={class:"payment-status-container"},S={class:"card shadow-sm"},I={class:"card-body text-center"},O={key:0,class:"my-5"},C={key:1,class:"my-5"},N={class:"mb-2"},V={class:"mb-2"},B={class:"mb-4"},D={class:"d-grid gap-2 col-md-6 mx-auto"},z={key:2,class:"my-5"},E={class:"mb-4"},L={class:"d-grid gap-2 col-md-6 mx-auto"};function q(n,s,u,t,i,m){return d(),l("div",R,[e("div",S,[e("div",I,[t.loading?(d(),l("div",O,s[4]||(s[4]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),e("p",{class:"mt-3"},"Processing your payment...",-1)]))):t.success?(d(),l("div",C,[s[8]||(s[8]=e("div",{class:"success-icon mb-4"},[e("i",{class:"bi bi-check-circle-fill text-success",style:{"font-size":"4rem"}})],-1)),s[9]||(s[9]=e("h2",{class:"mb-3"},"Payment Successful!",-1)),s[10]||(s[10]=e("p",{class:"mb-4"},"Your order has been placed successfully.",-1)),e("p",N,[s[5]||(s[5]=e("strong",null,"Order Reference:",-1)),y(" "+c(t.orderReference),1)]),e("p",V,[s[6]||(s[6]=e("strong",null,"Transaction ID:",-1)),y(" "+c(t.transactionId),1)]),e("p",B,[s[7]||(s[7]=e("strong",null,"Amount:",-1)),y(" "+c(t.amount),1)]),e("div",D,[e("button",{onClick:s[0]||(s[0]=(...r)=>t.goToMarketplace&&t.goToMarketplace(...r)),class:"btn btn-primary"}," Continue Shopping "),e("button",{onClick:s[1]||(s[1]=(...r)=>t.viewOrders&&t.viewOrders(...r)),class:"btn btn-outline-primary"}," View My Orders ")])])):(d(),l("div",z,[s[11]||(s[11]=e("div",{class:"error-icon mb-4"},[e("i",{class:"bi bi-exclamation-circle-fill text-danger",style:{"font-size":"4rem"}})],-1)),s[12]||(s[12]=e("h2",{class:"mb-3"},"Payment Failed",-1)),e("p",E,c(t.errorMessage),1),e("div",L,[e("button",{onClick:s[2]||(s[2]=(...r)=>t.goToMarketplace&&t.goToMarketplace(...r)),class:"btn btn-primary"}," Return to Marketplace "),e("button",{onClick:s[3]||(s[3]=(...r)=>t.tryAgain&&t.tryAgain(...r)),class:"btn btn-outline-primary"}," Try Again ")])]))])])])}const J=M(T,[["render",q],["__scopeId","data-v-b57ecf9e"]]);export{J as default};
