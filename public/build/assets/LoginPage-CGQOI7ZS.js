import{_ as T,r as d,c as l,a as n,b,w,v as y,d as u,t as x,e as k,o as i,f as S,g as L,u as F,h as M}from"./main-6TRAM3lj.js";import{L as C}from"./LoginLeftPanel-_vXK8big.js";import{l as D}from"./authService-ZaU-JPLS.js";const E={name:"LoginForm",props:{loading:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["submit","signup","forgot-password"],setup(s,{emit:e}){const a=d(""),o=d("");return{email:a,password:o,handleSubmit:()=>{e("submit",{email:a.value,password:o.value})}}}},N={class:"form-group"},R={class:"form-group"},V={class:"form-text text-end"},B={key:0,class:"alert alert-danger",role:"alert"},O=["disabled"],H={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},I={class:"signup-link"};function U(s,e,a,o,m,c){return i(),l("form",{onSubmit:e[4]||(e[4]=u((...t)=>o.handleSubmit&&o.handleSubmit(...t),["prevent"])),class:"login-form"},[n("div",N,[w(n("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=t=>o.email=t),placeholder:"Email",autocomplete:"email",required:""},null,512),[[y,o.email]])]),n("div",R,[w(n("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=t=>o.password=t),placeholder:"Password",autocomplete:"current-password",required:""},null,512),[[y,o.password]]),n("div",V,[n("a",{href:"#",onClick:e[2]||(e[2]=u(t=>s.$emit("forgot-password"),["prevent"]))},"Forgot Password?")])]),a.error?(i(),l("div",B,x(a.error),1)):b("",!0),n("button",{type:"submit",class:"login-btn",disabled:a.loading},[a.loading?(i(),l("span",H)):b("",!0),e[5]||(e[5]=k(" LOG IN "))],8,O),n("div",I,[e[6]||(e[6]=k(" Don't have an account? ")),n("a",{href:"#",onClick:e[3]||(e[3]=u(t=>s.$emit("signup"),["prevent"]))},"sign up")])],32)}const q=T(E,[["render",U],["__scopeId","data-v-f55d129f"]]),G={name:"LoginPage",components:{LoginForm:q,LoginLeftPanel:C},setup(){const s=F(),e=M(),a=d(!1),o=d(null);return{loading:a,error:o,animatedTexts:["Welcome to HalalLink","Connect with Halal businesses","Grow your Halal network","Access exclusive resources"],handleLogin:async P=>{var p,f,v,_;a.value=!0,o.value=null;try{const r=await D(P);e.commit("SET_USER",r.user),e.commit("SET_TOKEN",r.access_token);const h=(p=r.user.company)==null?void 0:p.company_type;if(h)switch(h){case"admin":s.push({name:"CompanyManagement"});break;case"logistic":s.push({name:"DeliveryManagement"});break;case"broiler":s.push({name:"OrderManagement"});break;case"sme":s.push({name:"Marketplace"});break;case"slaughterhouse":s.push({name:"OrderManagement"});break;default:s.push({name:"Dashboard"})}else s.push({name:"Dashboard"})}catch(r){console.error("Login error:",r),((f=r.response)==null?void 0:f.status)===500?o.value="Server error. Please try again later or contact support.":o.value=((_=(v=r.response)==null?void 0:v.data)==null?void 0:_.message)||"Login failed. Please check your credentials."}finally{a.value=!1}},goToRegister:()=>{s.push({name:"Register"})},goToForgotPassword:()=>{s.push({name:"ForgotPassword"})}}}},W={class:"login-container"},A={class:"login-card"},K={class:"right-panel"};function $(s,e,a,o,m,c){const t=L("login-left-panel"),g=L("login-form");return i(),l("div",W,[n("div",A,[S(t,{texts:o.animatedTexts},null,8,["texts"]),n("div",K,[e[0]||(e[0]=n("h2",null,"Welcome",-1)),e[1]||(e[1]=n("p",null,"Log-in to your account to continue",-1)),S(g,{loading:o.loading,error:o.error,onSubmit:o.handleLogin,onSignup:o.goToRegister,onForgotPassword:o.goToForgotPassword},null,8,["loading","error","onSubmit","onSignup","onForgotPassword"])])])])}const Q=T(G,[["render",$],["__scopeId","data-v-15c90276"]]);export{Q as default};
