import{_ as C,r as d,p as L,c as r,b as u,a as n,w as g,v as b,J as k,K as P,t as y,e as h,d as R,o as s,f as F,g as D,B as N,F as T,i as U,u as V,h as A}from"./main-6TRAM3lj.js";import{L as M}from"./LoginLeftPanel-_vXK8big.js";import{r as B}from"./authService-ZaU-JPLS.js";const q={name:"RegisterForm",props:{loading:{type:Boolean,default:!1}},emits:["submit","login"],setup(p,{emit:e}){const l=d(1),o=d(null),f=d(""),v=d(""),t=d({company_name:"",company_type:"",company_logo:null,email:"",password:"",password_confirmation:"",tel_number:"+60"});return L(v,i=>{const a=i.replace(/\s+/g,"");if(a.length>=9){const x=a.substring(0,5),S=a.substring(5,9);t.value.tel_number=`+60 ${x} ${S}`}else t.value.tel_number=`+60 ${a}`}),{currentStep:l,formData:t,phoneNumber:v,logoPreview:o,logoFileName:f,nextStep:()=>{if(!t.value.company_name||!t.value.company_type){alert("Please fill in all required fields");return}l.value=2},prevStep:()=>{l.value=1},handleFileUpload:i=>{const a=i.target.files[0];if(!a)return;t.value.company_logo=a,f.value=a.name;const x=new FileReader;x.onload=S=>{o.value=S.target.result},x.readAsDataURL(a)},handleSubmit:()=>{const i=new FormData;Object.keys(t.value).forEach(a=>{a==="company_logo"&&t.value[a]!==null?i.append("company_logo",t.value[a],t.value[a].name):t.value[a]!==null&&t.value[a]!==void 0&&i.append(a,t.value[a])}),e("submit",i)}}}},E={key:0},j={class:"form-group"},H={class:"form-group"},I={class:"form-group file-upload"},G={for:"company_logo",class:"file-label"},J={key:0,class:"logo-preview"},K=["src"],O={key:1},X={class:"form-group"},Y={class:"form-group"},z={class:"form-group"},Q={class:"phone-input-container"},W={class:"form-group"},Z={class:"form-group"},$={class:"button-group"},ee=["disabled"],oe={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},te={class:"signup-link"};function ne(p,e,l,o,f,v){return s(),r("form",{onSubmit:e[10]||(e[10]=R((...t)=>o.handleSubmit&&o.handleSubmit(...t),["prevent"])),class:"login-form",enctype:"multipart/form-data"},[o.currentStep===1?(s(),r("div",E,[e[12]||(e[12]=n("h3",{class:"step-title"},"Company Information",-1)),n("div",j,[g(n("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.formData.company_name=t),placeholder:"Company Name",required:""},null,512),[[b,o.formData.company_name]])]),n("div",H,[g(n("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.formData.company_type=t),required:"",class:"form-select"},e[11]||(e[11]=[P('<option value="" disabled selected data-v-76abe95e>Select Company Type</option><option value="broiler" data-v-76abe95e>Broiler</option><option value="slaughterhouse" data-v-76abe95e>Slaughterhouse</option><option value="sme" data-v-76abe95e>SME</option><option value="logistic" data-v-76abe95e>Logistic</option>',5)]),512),[[k,o.formData.company_type]])]),n("div",I,[n("label",G,[n("span",null,y(o.logoFileName||"Upload Company Logo (Optional)"),1),n("input",{type:"file",id:"company_logo",onChange:e[2]||(e[2]=(...t)=>o.handleFileUpload&&o.handleFileUpload(...t)),accept:"image/*",class:"file-input"},null,32)]),o.logoPreview?(s(),r("div",J,[n("img",{src:o.logoPreview,alt:"Company Logo Preview"},null,8,K)])):u("",!0)]),n("button",{type:"button",class:"login-btn",onClick:e[3]||(e[3]=(...t)=>o.nextStep&&o.nextStep(...t))}," NEXT ")])):u("",!0),o.currentStep===2?(s(),r("div",O,[e[16]||(e[16]=n("h3",{class:"step-title"},"Admin Account",-1)),n("div",X,[g(n("input",{type:"email","onUpdate:modelValue":e[4]||(e[4]=t=>o.formData.email=t),placeholder:"Email",required:""},null,512),[[b,o.formData.email]])]),n("div",Y,[n("div",z,[n("div",Q,[e[13]||(e[13]=n("div",{class:"phone-prefix"},"+60",-1)),g(n("input",{type:"tel","onUpdate:modelValue":e[5]||(e[5]=t=>o.phoneNumber=t),placeholder:"xxxxx xxxx",required:"",class:"phone-input"},null,512),[[b,o.phoneNumber]])]),e[14]||(e[14]=n("small",{class:"form-text text-muted"},"Malaysian format: +60 xxxxx xxxx",-1))])]),n("div",W,[g(n("input",{type:"password","onUpdate:modelValue":e[6]||(e[6]=t=>o.formData.password=t),placeholder:"Password",required:""},null,512),[[b,o.formData.password]])]),n("div",Z,[g(n("input",{type:"password","onUpdate:modelValue":e[7]||(e[7]=t=>o.formData.password_confirmation=t),placeholder:"Confirm Password",required:""},null,512),[[b,o.formData.password_confirmation]])]),n("div",$,[n("button",{type:"button",class:"back-btn",onClick:e[8]||(e[8]=(...t)=>o.prevStep&&o.prevStep(...t))}," BACK "),n("button",{type:"submit",class:"login-btn",disabled:l.loading},[l.loading?(s(),r("span",oe)):u("",!0),e[15]||(e[15]=h(" REGISTER "))],8,ee)])])):u("",!0),n("div",te,[e[17]||(e[17]=h(" Already have an account? ")),n("a",{href:"#",onClick:e[9]||(e[9]=R(t=>p.$emit("login"),["prevent"]))},"sign in")])],32)}const ae=C(q,[["render",ne],["__scopeId","data-v-76abe95e"]]),se={name:"RegisterPage",components:{LoginLeftPanel:M,RegisterForm:ae},setup(){const p=V();A();const e=d(!1),l=d(null),o=d(null);return{loading:e,error:l,successMessage:o,animatedTexts:["Join our Halal business community","Connect with verified Halal businesses","Grow your Halal business network","Access exclusive Halal resources"],handleRegister:async _=>{var m,c,w,i;e.value=!0,l.value=null,o.value=null;try{const a=await B(_);o.value=a.message||"Registration successful! Your account is pending approval. Redirecting to login page...",setTimeout(()=>{p.push({name:"Login"})},3e3)}catch(a){console.error("Registration error:",a),(c=(m=a.response)==null?void 0:m.data)!=null&&c.errors?l.value=a.response.data.errors:l.value=((i=(w=a.response)==null?void 0:w.data)==null?void 0:i.message)||"Registration failed. Please try again."}finally{e.value=!1}},goToLogin:()=>{p.push({name:"Login"})}}}},le={class:"login-container"},re={class:"login-card"},ie={class:"right-panel"},de={key:0,class:"alert alert-success w-100 mb-4"},ue={key:1,class:"alert alert-danger w-100 mb-4"},me={key:0},pe={key:1,class:"mb-0 ps-3"};function ce(p,e,l,o,f,v){const t=D("login-left-panel"),_=D("register-form");return s(),r("div",le,[n("div",re,[F(t,{texts:o.animatedTexts},null,8,["texts"]),n("div",ie,[e[2]||(e[2]=n("h2",null,"Create Account",-1)),e[3]||(e[3]=n("p",null,"Register to join our community",-1)),o.successMessage?(s(),r("div",de,[e[0]||(e[0]=n("i",{class:"fas fa-check-circle me-2"},null,-1)),h(" "+y(o.successMessage),1)])):u("",!0),o.error?(s(),r("div",ue,[e[1]||(e[1]=n("div",{class:"text-center"},[n("i",{class:"fas fa-exclamation-circle me-2"})],-1)),typeof o.error=="string"?(s(),r("span",me,y(o.error),1)):typeof o.error=="object"?(s(),r("ul",pe,[(s(!0),r(T,null,U(o.error,(m,c)=>(s(),r("li",{key:c},[n("strong",null,y(c)+":",1),h(" "+y(Array.isArray(m)?m.join(", "):m),1)]))),128))])):u("",!0)])):u("",!0),o.successMessage?u("",!0):(s(),N(_,{key:2,loading:o.loading,error:null,onSubmit:o.handleRegister,onLogin:o.goToLogin},null,8,["loading","onSubmit","onLogin"]))])])])}const be=C(se,[["render",ce],["__scopeId","data-v-75b7f486"]]);export{be as default};
