import{I as x,_ as is,c as n,a as s,f as I,g as P,e as k,b as u,t as l,k as N,n as B,w as rs,v as ds,F as cs,j as ms,r as b,y as us,L as bs,M,o as i}from"./main-BpaYbEPg.js";import{S as fs}from"./StatsCard-BQtpX15Y.js";import{R as vs}from"./ResponsiveTable-B0dEHhy-.js";import{L as ks}from"./LoadingSpinner-9sKMkQ1j.js";const w={fetchTasks(d={}){return x("/api/tasks",{params:d})},fetchTaskStats(){return x("/api/tasks/stats")},getTaskById(d){return x(`/api/tasks/${d}`)},updateTask(d,e){return x(`/api/tasks/${d}`,{method:"put",data:e})},searchSlaughterers(d="",e=null){const m={};return d&&(m.search=d),e&&(m.company_id=e),x("/api/slaughterers/search",{params:m})},verifyTaskUser(d){return x(`/api/tasks/${d}/verify-user`)}},_s={name:"TaskManagementPage",components:{StatsCard:fs,ResponsiveTable:vs,LoadingSpinner:ks},setup(){const d=b(!0),e=b(null),m=b([]),t=b({total:0,completed:0,pending:0,in_progress:0}),c=b(null),A=b(""),v=b([]),U=b(!1),y=b(null),o=b(null),E=[{key:"deliveryID",label:"Delivery ID",sortable:!0},{key:"orderID",label:"Order ID",sortable:!0},{key:"item_name",label:"Item Name",sortable:!0},{key:"task_status",label:"Status",sortable:!0}],T=b({current_page:1,per_page:10,total:0});let C=null;const F=b(""),L=b("start_timestamp"),H=b("asc");let f=null,h=null,D=null,S=null;const p=async()=>{d.value=!0,e.value=null;try{const a={page:T.value.current_page,search:F.value,sort_by:L.value,sort_direction:H.value},r=await w.fetchTasks(a);console.log("Response:",JSON.stringify(r,null,2)),m.value=r.data,T.value={current_page:r.current_page,per_page:r.per_page,total:r.total},j()}catch(a){console.error("Error fetching tasks:",a),e.value="Failed to load tasks. Please try again."}finally{d.value=!1}},j=()=>{const a=m.value.filter(g=>g.task_status==="completed").length,r=m.value.filter(g=>g.task_status==="pending").length,_=m.value.filter(g=>g.task_status==="in_progress").length;t.value={total:m.value.length,completed:a,pending:r,in_progress:_}},J=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",q=a=>{switch(a){case"completed":return"bg-success";case"in_progress":return"bg-primary";case"pending":return"bg-warning";default:return"bg-secondary"}},z=a=>{F.value=a,T.value.current_page=1,p()},Y=({key:a,direction:r})=>{L.value=a,H.value=r,p()},G=a=>{T.value.current_page=a,p()},K=a=>{c.value=a,f||(f=new M(document.getElementById("taskDetailsModal"))),f.show()},O=()=>{f.hide(),h||(h=new M(document.getElementById("startTaskConfirmModal"))),h.show()},W=()=>{f.hide(),D||(D=new M(document.getElementById("completeTaskConfirmModal"))),D.show()},X=()=>{h.hide(),setTimeout(()=>{f.show()},500)},Z=()=>{D.hide(),setTimeout(()=>{f.show()},500)},$=async()=>{var a,r;try{if(!c.value.userID){h.hide(),R();return}const _=await w.updateTask(c.value.taskID,{task_status:"in_progress",start_timestamp:new Date().toISOString()});h.hide(),await p(),setTimeout(()=>{const g=m.value.find(ns=>ns.taskID===c.value.taskID);g&&(c.value=g),f.show()},500)}catch(_){((r=(a=_.response)==null?void 0:a.data)==null?void 0:r.error)==="NO_USER_ASSIGNED"?(h.hide(),R()):(console.error("Error starting task:",_),alert("Failed to start task. Please try again."),h.hide())}},ss=async()=>{try{const a=await w.updateTask(c.value.taskID,{task_status:"completed",finish_timestamp:new Date().toISOString()});D.hide(),await p(),setTimeout(()=>{const r=m.value.find(_=>_.taskID===c.value.taskID);r&&(c.value=r),f.show()},500)}catch(a){console.error("Error completing task:",a),alert("Failed to complete task. Please try again."),D.hide()}},Q=async()=>{U.value=!0,v.value=[];try{const a=await w.searchSlaughterers(A.value);console.log("Search Response:",JSON.stringify(a)),a.success&&a.data?v.value=a.data:(console.error("Failed to search users:",a),v.value=[])}catch(a){console.error("Error searching users:",a),v.value=[]}finally{U.value=!1}},es=a=>{y.value=a.userID,o.value=a},R=async()=>{try{const a=await w.verifyTaskUser(c.value.taskID);console.log("Verify Response:",JSON.stringify(a)),a.success?(f.hide(),A.value="",v.value=[],y.value=null,o.value=null,S||(S=new M(document.getElementById("assignUserModal"))),S.show(),Q()):(alert(a.message),a.assigned_user&&(c.value.userID=a.assigned_user.userID,c.value.user_name=a.assigned_user.fullname,c.value.user_email=a.assigned_user.email))}catch(a){console.error("Error verifying task user:",a),alert("Failed to verify task assignment status")}},ts=()=>{S.hide(),setTimeout(()=>{f.show()},500)},as=async()=>{if(y.value)try{const a=await w.updateTask(c.value.taskID,{userID:y.value});S.hide(),await p(),setTimeout(()=>{const r=m.value.find(_=>_.taskID===c.value.taskID);r&&(r.user_name=o.value.fullname||o.value.name,r.user_email=o.value.email,c.value=r),c.value.start_timestamp?f.show():O()},500)}catch(a){console.error("Error assigning user:",a),alert("Failed to assign user. Please try again."),S.hide()}},V=async()=>{if(!d.value){T.value.current_page=1,e.value=null,d.value=!0;try{await p()}catch(a){console.error("Error refreshing tasks:",a),e.value="Failed to refresh tasks. Please try again."}finally{d.value=!1}}},os=()=>{C&&clearInterval(C),C=setInterval(()=>{d.value||V()},2e4)},ls=()=>{C&&(clearInterval(C),C=null)};return us(()=>{p(),os()}),bs(()=>{ls()}),{loading:d,error:e,tasks:m,taskStats:t,columns:E,pagination:T,selectedTask:c,formatDate:J,getStatusClass:q,handleSearch:z,handleSort:Y,handlePageChange:G,viewTaskDetails:K,openStartConfirmation:O,openCompleteConfirmation:W,cancelStartTask:X,cancelCompleteTask:Z,confirmStartTask:$,confirmCompleteTask:ss,refreshData:V,userSearchQuery:A,userSearchResults:v,searchingUsers:U,selectedUserId:y,searchUsers:Q,selectUser:es,openAssignUserModal:R,cancelAssignUser:ts,confirmAssignUser:as}}},hs={class:"task-management-page"},ps={class:"row mb-4"},gs={class:"col-md-3 col-sm-6 mb-3"},ys={class:"col-md-3 col-sm-6 mb-3"},Ts={class:"col-md-3 col-sm-6 mb-3"},Cs={class:"col-md-3 col-sm-6 mb-3"},Ds={class:"card theme-card"},Ss={class:"card-header d-flex justify-content-between align-items-center theme-header"},xs={class:"card-body theme-body"},Is={key:0,class:"alert alert-danger",role:"alert"},ws={class:"position-relative"},Us={key:0,class:"table-loading-overlay"},As={key:1,class:"text-center py-5"},Ns={key:2},Ms=["onClick"],Es={class:"modal fade",id:"taskDetailsModal",tabindex:"-1","aria-hidden":"true"},Rs={class:"modal-dialog modal-lg"},Ps={class:"modal-content theme-modal"},Bs={key:0,class:"modal-body theme-body"},Fs={class:"task-essential-info mb-4"},Ls={class:"d-flex justify-content-between align-items-center mb-3"},Hs={class:"mb-1"},Os={class:"d-flex align-items-center"},Qs={class:"text-muted small"},Vs={class:"task-timeline"},js={key:0,class:"d-flex align-items-center"},Js={class:"small"},qs={key:1,class:"d-flex align-items-center"},zs={class:"small"},Ys={class:"row"},Gs={class:"col-md-6"},Ks={class:"info-item"},Ws={class:"info-value"},Xs={class:"info-item"},Zs={class:"info-value"},$s={class:"col-md-6"},se={class:"info-item"},ee={class:"info-value"},te={key:0,class:"info-item"},ae={class:"info-value"},oe={class:"mt-3 border-top pt-3"},le={class:"d-flex justify-content-between align-items-center mb-2"},ne={key:0,class:"d-flex align-items-center"},ie={class:"fw-bold"},re={class:"small text-muted"},de={key:1,class:"text-muted fst-italic"},ce={class:"accordion",id:"taskDetailsAccordion"},me={class:"accordion-item border-0 mb-2"},ue={id:"itemDetailsCollapse",class:"accordion-collapse collapse","aria-labelledby":"itemDetailsHeading","data-bs-parent":"#taskDetailsAccordion"},be={class:"accordion-body theme-accordion-body"},fe={class:"info-item"},ve={class:"info-value"},ke={class:"info-item"},_e={class:"info-value"},he={key:0,class:"info-item"},pe={class:"info-value"},ge={class:"info-item"},ye={class:"info-value text-capitalize"},Te={class:"accordion-item border-0 mb-2"},Ce={id:"supplierCollapse",class:"accordion-collapse collapse","aria-labelledby":"supplierHeading","data-bs-parent":"#taskDetailsAccordion"},De={class:"accordion-body theme-accordion-body"},Se={class:"info-item"},xe={class:"info-value"},Ie={class:"accordion-item border-0 mb-2"},we={id:"timelineCollapse",class:"accordion-collapse collapse","aria-labelledby":"timelineHeading","data-bs-parent":"#taskDetailsAccordion"},Ue={class:"accordion-body theme-accordion-body"},Ae={class:"timeline"},Ne={class:"timeline-item"},Me={class:"timeline-content"},Ee={class:"small text-muted mb-0"},Re={key:0,class:"timeline-item"},Pe={class:"timeline-content"},Be={class:"small text-muted mb-0"},Fe={key:1,class:"timeline-item"},Le={class:"timeline-content"},He={class:"small text-muted mb-0"},Oe={key:2,class:"timeline-item"},Qe={class:"timeline-content"},Ve={class:"small text-muted mb-0"},je={class:"accordion-item border-0"},Je={id:"notesCollapse",class:"accordion-collapse collapse","aria-labelledby":"notesHeading","data-bs-parent":"#taskDetailsAccordion"},qe={class:"accordion-body theme-accordion-body"},ze={class:"mb-0"},Ye={class:"modal-footer theme-footer"},Ge={class:"modal fade",id:"startTaskConfirmModal",tabindex:"-1","aria-hidden":"true"},Ke={class:"modal-dialog"},We={class:"modal-content theme-modal"},Xe={class:"modal-footer theme-footer"},Ze={class:"modal fade",id:"completeTaskConfirmModal",tabindex:"-1","aria-hidden":"true"},$e={class:"modal-dialog"},st={class:"modal-content theme-modal"},et={class:"modal-footer theme-footer"},tt={class:"modal fade",id:"assignUserModal",tabindex:"-1","aria-hidden":"true"},at={class:"modal-dialog"},ot={class:"modal-content theme-modal"},lt={class:"modal-body theme-body"},nt={class:"mb-3"},it={class:"input-group"},rt={key:0,class:"text-center py-3"},dt={key:1,class:"text-center py-3"},ct={key:2,class:"user-search-results",style:{"max-height":"300px","overflow-y":"auto"}},mt=["onClick"],ut={class:"fw-bold"},bt={class:"small text-muted"},ft={class:"modal-footer theme-footer"},vt=["disabled"];function kt(d,e,m,t,c,A){const v=P("StatsCard"),U=P("LoadingSpinner"),y=P("ResponsiveTable");return i(),n("div",hs,[e[60]||(e[60]=s("h1",{class:"mb-4"},"Task Management",-1)),s("div",ps,[s("div",gs,[I(v,{title:"Total Tasks",count:t.taskStats.total||0,icon:"fas fa-tasks","bg-color":"bg-primary"},null,8,["count"])]),s("div",ys,[I(v,{title:"Pending",count:t.taskStats.pending||0,icon:"fas fa-hourglass-half","bg-color":"bg-warning"},null,8,["count"])]),s("div",Ts,[I(v,{title:"In Progress",count:t.taskStats.in_progress||0,icon:"fas fa-cogs","bg-color":"bg-info"},null,8,["count"])]),s("div",Cs,[I(v,{title:"Completed",count:t.taskStats.completed||0,icon:"fas fa-check-circle","bg-color":"bg-success"},null,8,["count"])])]),s("div",Ds,[s("div",Ss,[e[15]||(e[15]=s("h5",{class:"mb-0"},"Tasks",-1)),s("button",{class:"btn btn-sm theme-btn-outline",onClick:e[0]||(e[0]=(...o)=>t.refreshData&&t.refreshData(...o))},e[14]||(e[14]=[s("i",{class:"fas fa-sync-alt"},null,-1),k(" Refresh ")]))]),s("div",xs,[t.error?(i(),n("div",Is,l(t.error),1)):u("",!0),s("div",ws,[t.loading?(i(),n("div",Us,[I(U)])):u("",!0),!t.tasks||t.tasks.length===0?(i(),n("div",As,e[16]||(e[16]=[s("div",{class:"mb-3"},[s("i",{class:"fas fa-tasks fa-4x text-muted"})],-1),s("h5",{class:"text-muted"},"No tasks found",-1),s("p",{class:"text-muted"},"Try adjusting your filters or check back later.",-1)]))):u("",!0),t.tasks&&t.tasks.length>0?(i(),n("div",Ns,[I(y,{columns:t.columns,items:t.tasks,onSearch:t.handleSearch,onSort:t.handleSort,onPageChange:t.handlePageChange},{task_status:N(({item:o})=>[s("span",{class:B(["badge",t.getStatusClass(o.task_status)])},l(o.task_status),3)]),item_name:N(({item:o})=>[k(l(o.item_name||"N/A"),1)]),actions:N(({item:o})=>[s("button",{class:"btn btn-sm btn-primary",onClick:E=>t.viewTaskDetails(o)},e[17]||(e[17]=[s("i",{class:"fas fa-edit"},null,-1),k(" Edit ")]),8,Ms)]),empty:N(()=>e[18]||(e[18]=[s("div",{class:"text-center py-5"},[s("i",{class:"fas fa-tasks fa-3x text-muted mb-3"}),s("p",null,"No tasks available")],-1)])),_:1},8,["columns","items","onSearch","onSort","onPageChange"])])):u("",!0)]),s("div",Es,[s("div",Rs,[s("div",Ps,[e[49]||(e[49]=s("div",{class:"modal-header theme-header"},[s("h5",{class:"modal-title"},"Task Details"),s("button",{type:"button",class:"btn-close theme-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t.selectedTask?(i(),n("div",Bs,[s("div",Fs,[s("div",Ls,[s("div",null,[s("h4",Hs,l(t.selectedTask.item_name||"Unnamed Task"),1),s("div",Os,[s("span",{class:B(["badge me-2",t.getStatusClass(t.selectedTask.task_status)])},l(t.selectedTask.task_status),3),s("span",Qs,"Task ID: "+l(t.selectedTask.taskID),1)])]),s("div",Vs,[t.selectedTask.start_timestamp?(i(),n("div",js,[e[19]||(e[19]=s("i",{class:"fas fa-play-circle text-primary me-1"},null,-1)),s("span",Js,l(t.formatDate(t.selectedTask.start_timestamp)),1)])):u("",!0),t.selectedTask.finish_timestamp?(i(),n("div",qs,[e[20]||(e[20]=s("i",{class:"fas fa-check-circle text-success me-1"},null,-1)),s("span",zs,l(t.formatDate(t.selectedTask.finish_timestamp)),1)])):u("",!0)])]),s("div",Ys,[s("div",Gs,[s("div",Ks,[e[21]||(e[21]=s("span",{class:"info-label"},"Delivery ID:",-1)),s("span",Ws,l(t.selectedTask.deliveryID||"N/A"),1)]),s("div",Xs,[e[22]||(e[22]=s("span",{class:"info-label"},"Order ID:",-1)),s("span",Zs,l(t.selectedTask.orderID||"N/A"),1)])]),s("div",$s,[s("div",se,[e[23]||(e[23]=s("span",{class:"info-label"},"Quantity:",-1)),s("span",ee,l(t.selectedTask.item_quantity||"N/A"),1)]),t.selectedTask.measurement_value&&t.selectedTask.measurement_type?(i(),n("div",te,[e[24]||(e[24]=s("span",{class:"info-label"},"Measurement:",-1)),s("span",ae,l(t.selectedTask.measurement_value)+" "+l(t.selectedTask.measurement_type),1)])):u("",!0)])]),s("div",oe,[s("div",le,[e[27]||(e[27]=s("h6",{class:"mb-0"},"Assigned To",-1)),t.selectedTask.userID?(i(),n("button",{key:1,class:"btn btn-sm btn-outline-secondary",onClick:e[2]||(e[2]=o=>t.openAssignUserModal())},e[26]||(e[26]=[s("i",{class:"fas fa-user-edit"},null,-1),k(" Change ")]))):(i(),n("button",{key:0,class:"btn btn-sm btn-outline-primary",onClick:e[1]||(e[1]=o=>t.openAssignUserModal())},e[25]||(e[25]=[s("i",{class:"fas fa-user-plus"},null,-1),k(" Assign ")])))]),t.selectedTask.userID&&t.selectedTask.user_name?(i(),n("div",ne,[e[28]||(e[28]=s("div",{class:"user-avatar me-2"},[s("i",{class:"fas fa-user-circle fa-2x text-primary"})],-1)),s("div",null,[s("div",ie,l(t.selectedTask.user_name),1),s("div",re,l(t.selectedTask.user_email||"No email available"),1)])])):(i(),n("div",de," No user assigned "))])]),s("div",ce,[s("div",me,[e[33]||(e[33]=s("h2",{class:"accordion-header",id:"itemDetailsHeading"},[s("button",{class:"accordion-button collapsed theme-accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#itemDetailsCollapse","aria-expanded":"false","aria-controls":"itemDetailsCollapse"},[s("i",{class:"fas fa-box me-2"}),k(" Item Details ")])],-1)),s("div",ue,[s("div",be,[s("div",fe,[e[29]||(e[29]=s("span",{class:"info-label"},"Item Name:",-1)),s("span",ve,l(t.selectedTask.item_name||"N/A"),1)]),s("div",ke,[e[30]||(e[30]=s("span",{class:"info-label"},"Quantity:",-1)),s("span",_e,l(t.selectedTask.item_quantity||"N/A"),1)]),t.selectedTask.measurement_value&&t.selectedTask.measurement_type?(i(),n("div",he,[e[31]||(e[31]=s("span",{class:"info-label"},"Measurement:",-1)),s("span",pe,l(t.selectedTask.measurement_value)+" "+l(t.selectedTask.measurement_type),1)])):u("",!0),s("div",ge,[e[32]||(e[32]=s("span",{class:"info-label"},"Task Type:",-1)),s("span",ye,l(t.selectedTask.task_type||"N/A"),1)])])])]),s("div",Te,[e[35]||(e[35]=s("h2",{class:"accordion-header",id:"supplierHeading"},[s("button",{class:"accordion-button collapsed theme-accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#supplierCollapse","aria-expanded":"false","aria-controls":"supplierCollapse"},[s("i",{class:"fas fa-map-marker-alt me-2"}),k(" Supplier Information ")])],-1)),s("div",Ce,[s("div",De,[s("div",Se,[e[34]||(e[34]=s("span",{class:"info-label"},"Supplier Address:",-1)),s("span",xe,l(t.selectedTask.supplier_address||"No address available"),1)])])])]),s("div",Ie,[e[44]||(e[44]=s("h2",{class:"accordion-header",id:"timelineHeading"},[s("button",{class:"accordion-button collapsed theme-accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#timelineCollapse","aria-expanded":"false","aria-controls":"timelineCollapse"},[s("i",{class:"fas fa-history me-2"}),k(" Timeline ")])],-1)),s("div",we,[s("div",Ue,[s("div",Ae,[s("div",Ne,[e[37]||(e[37]=s("div",{class:"timeline-icon bg-secondary"},[s("i",{class:"fas fa-plus text-white"})],-1)),s("div",Me,[e[36]||(e[36]=s("h6",{class:"mb-0"},"Created",-1)),s("p",Ee,l(t.formatDate(t.selectedTask.created_at)),1)])]),t.selectedTask.start_timestamp?(i(),n("div",Re,[e[39]||(e[39]=s("div",{class:"timeline-icon bg-primary"},[s("i",{class:"fas fa-play text-white"})],-1)),s("div",Pe,[e[38]||(e[38]=s("h6",{class:"mb-0"},"Started",-1)),s("p",Be,l(t.formatDate(t.selectedTask.start_timestamp)),1)])])):u("",!0),t.selectedTask.finish_timestamp?(i(),n("div",Fe,[e[41]||(e[41]=s("div",{class:"timeline-icon bg-success"},[s("i",{class:"fas fa-check text-white"})],-1)),s("div",Le,[e[40]||(e[40]=s("h6",{class:"mb-0"},"Completed",-1)),s("p",He,l(t.formatDate(t.selectedTask.finish_timestamp)),1)])])):u("",!0),t.selectedTask.updated_at&&t.selectedTask.updated_at!==t.selectedTask.created_at?(i(),n("div",Oe,[e[43]||(e[43]=s("div",{class:"timeline-icon bg-info"},[s("i",{class:"fas fa-edit text-white"})],-1)),s("div",Qe,[e[42]||(e[42]=s("h6",{class:"mb-0"},"Last Updated",-1)),s("p",Ve,l(t.formatDate(t.selectedTask.updated_at)),1)])])):u("",!0)])])])]),s("div",je,[e[45]||(e[45]=s("h2",{class:"accordion-header",id:"notesHeading"},[s("button",{class:"accordion-button collapsed theme-accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#notesCollapse","aria-expanded":"false","aria-controls":"notesCollapse"},[s("i",{class:"fas fa-sticky-note me-2"}),k(" Notes ")])],-1)),s("div",Je,[s("div",qe,[s("p",ze,l(t.selectedTask.notes||"No notes available"),1)])])])])])):u("",!0),s("div",Ye,[t.selectedTask&&!t.selectedTask.start_timestamp&&!t.selectedTask.finish_timestamp?(i(),n("button",{key:0,type:"button",class:"btn btn-primary theme-btn-primary me-2",onClick:e[3]||(e[3]=o=>t.openStartConfirmation())},e[46]||(e[46]=[s("i",{class:"fas fa-play"},null,-1),k(" Start Task ")]))):u("",!0),t.selectedTask&&t.selectedTask.start_timestamp&&!t.selectedTask.finish_timestamp?(i(),n("button",{key:1,type:"button",class:"btn btn-success me-2",onClick:e[4]||(e[4]=o=>t.openCompleteConfirmation())},e[47]||(e[47]=[s("i",{class:"fas fa-check"},null,-1),k(" Complete Task ")]))):u("",!0),e[48]||(e[48]=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1))])])])]),s("div",Ge,[s("div",Ke,[s("div",We,[e[50]||(e[50]=s("div",{class:"modal-header theme-header"},[s("h5",{class:"modal-title"},"Confirm Start Task"),s("button",{type:"button",class:"btn-close theme-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e[51]||(e[51]=s("div",{class:"modal-body theme-body"},[s("p",null,"Are you sure you want to start this task?")],-1)),s("div",Xe,[s("button",{type:"button",class:"btn btn-secondary",onClick:e[5]||(e[5]=o=>t.cancelStartTask())},"No"),s("button",{type:"button",class:"btn btn-primary theme-btn-primary",onClick:e[6]||(e[6]=o=>t.confirmStartTask())},"Yes")])])])]),s("div",Ze,[s("div",$e,[s("div",st,[e[52]||(e[52]=s("div",{class:"modal-header theme-header"},[s("h5",{class:"modal-title"},"Confirm Complete Task"),s("button",{type:"button",class:"btn-close theme-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e[53]||(e[53]=s("div",{class:"modal-body theme-body"},[s("p",null,"Are you sure you want to complete this task?")],-1)),s("div",et,[s("button",{type:"button",class:"btn btn-secondary",onClick:e[7]||(e[7]=o=>t.cancelCompleteTask())},"No"),s("button",{type:"button",class:"btn btn-success",onClick:e[8]||(e[8]=o=>t.confirmCompleteTask())},"Yes")])])])]),s("div",tt,[s("div",at,[s("div",ot,[e[59]||(e[59]=s("div",{class:"modal-header theme-header"},[s("h5",{class:"modal-title"},"Assign User to Task"),s("button",{type:"button",class:"btn-close theme-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",lt,[s("div",nt,[e[55]||(e[55]=s("label",{for:"userSearch",class:"form-label"},"Search Users",-1)),s("div",it,[rs(s("input",{type:"text",class:"form-control",id:"userSearch","onUpdate:modelValue":e[9]||(e[9]=o=>t.userSearchQuery=o),onInput:e[10]||(e[10]=(...o)=>t.searchUsers&&t.searchUsers(...o)),placeholder:"Search by name or email"},null,544),[[ds,t.userSearchQuery]]),s("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[11]||(e[11]=(...o)=>t.searchUsers&&t.searchUsers(...o))},e[54]||(e[54]=[s("i",{class:"fas fa-search"},null,-1)]))])]),t.searchingUsers?(i(),n("div",rt,e[56]||(e[56]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)]))):t.userSearchResults.length===0?(i(),n("div",dt,e[57]||(e[57]=[s("p",{class:"text-muted mb-0"},"No users found",-1)]))):(i(),n("div",ct,[(i(!0),n(cs,null,ms(t.userSearchResults,o=>(i(),n("div",{key:o.userID,class:B(["user-search-item p-2 border-bottom d-flex align-items-center",{selected:t.selectedUserId===o.userID}]),onClick:E=>t.selectUser(o)},[e[58]||(e[58]=s("div",{class:"user-avatar me-2"},[s("i",{class:"fas fa-user-circle fa-2x text-primary"})],-1)),s("div",null,[s("div",ut,l(o.fullname||o.name),1),s("div",bt,l(o.email),1)])],10,mt))),128))]))]),s("div",ft,[s("button",{type:"button",class:"btn btn-secondary",onClick:e[12]||(e[12]=o=>t.cancelAssignUser())},"Cancel"),s("button",{type:"button",class:"btn btn-primary theme-btn-primary",onClick:e[13]||(e[13]=o=>t.confirmAssignUser()),disabled:!t.selectedUserId}," Assign ",8,vt)])])])])])])])}const yt=is(_s,[["render",kt],["__scopeId","data-v-3ab6a7d6"]]);export{yt as default};
