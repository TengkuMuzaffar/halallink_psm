import{_ as L,r as d,c as i,a as s,b as _,w,v as b,d as g,t as P,e as h,o as l,f as S,g as y,u as x,h as k}from"./main-6HkEK7r2.js";import{L as F}from"./LoginLeftPanel-DL_uYZRF.js";import{l as E}from"./authService-DmvttMz5.js";const N={name:"LoginForm",props:{loading:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["submit","signup","forgot-password"],setup(r,{emit:o}){const t=d(""),e=d("");return{email:t,password:e,handleSubmit:()=>{o("submit",{email:t.value,password:e.value})}}}},R={class:"form-group"},V={class:"form-group"},C={class:"form-text text-end"},B={key:0,class:"alert alert-danger",role:"alert"},D=["disabled"],H={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},I={class:"signup-link"};function U(r,o,t,e,u,m){return l(),i("form",{onSubmit:o[4]||(o[4]=g((...n)=>e.handleSubmit&&e.handleSubmit(...n),["prevent"])),class:"login-form"},[s("div",R,[w(s("input",{type:"email","onUpdate:modelValue":o[0]||(o[0]=n=>e.email=n),placeholder:"Email",required:""},null,512),[[b,e.email]])]),s("div",V,[w(s("input",{type:"password","onUpdate:modelValue":o[1]||(o[1]=n=>e.password=n),placeholder:"Password",required:""},null,512),[[b,e.password]]),s("div",C,[s("a",{href:"#",onClick:o[2]||(o[2]=g(n=>r.$emit("forgot-password"),["prevent"]))},"Forgot Password?")])]),t.error?(l(),i("div",B,P(t.error),1)):_("",!0),s("button",{type:"submit",class:"login-btn",disabled:t.loading},[t.loading?(l(),i("span",H)):_("",!0),o[5]||(o[5]=h(" LOG IN "))],8,D),s("div",I,[o[6]||(o[6]=h(" Don't have an account? ")),s("a",{href:"#",onClick:o[3]||(o[3]=g(n=>r.$emit("signup"),["prevent"]))},"sign up")])],32)}const q=L(N,[["render",U],["__scopeId","data-v-4b46b341"]]),G={name:"LoginPage",components:{LoginForm:q,LoginLeftPanel:F},setup(){const r=x(),o=k(),t=d(!1),e=d(null);return{loading:t,error:e,animatedTexts:["Welcome to HalalLink","Connect with Halal businesses","Grow your Halal network","Access exclusive resources"],handleLogin:async T=>{var p,f,v;t.value=!0,e.value=null;try{const a=await E(T);o.commit("SET_USER",a.user),o.commit("SET_TOKEN",a.access_token),r.push({name:"Dashboard"})}catch(a){console.error("Login error:",a),((p=a.response)==null?void 0:p.status)===500?e.value="Server error. Please try again later or contact support.":e.value=((v=(f=a.response)==null?void 0:f.data)==null?void 0:v.message)||"Login failed. Please check your credentials."}finally{t.value=!1}},goToRegister:()=>{r.push({name:"Register"})},goToForgotPassword:()=>{r.push({name:"ForgotPassword"})}}}},M={class:"login-container"},O={class:"login-card"},W={class:"right-panel"};function A(r,o,t,e,u,m){const n=y("login-left-panel"),c=y("login-form");return l(),i("div",M,[s("div",O,[S(n,{texts:e.animatedTexts},null,8,["texts"]),s("div",W,[o[0]||(o[0]=s("h2",null,"Welcome",-1)),o[1]||(o[1]=s("p",null,"Log-in to your account to continue",-1)),S(c,{loading:e.loading,error:e.error,onSubmit:e.handleLogin,onSignup:e.goToRegister,onForgotPassword:e.goToForgotPassword},null,8,["loading","error","onSubmit","onSignup","onForgotPassword"])])])])}const z=L(G,[["render",A],["__scopeId","data-v-2f216e47"]]);export{z as default};
