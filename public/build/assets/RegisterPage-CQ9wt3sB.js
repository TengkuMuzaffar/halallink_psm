import{_ as x,r as c,c as i,b as u,a as t,w as v,v as _,A as C,B as F,t as b,e as S,d as h,o as s,f as L,g as D,s as k,F as P,j as T,u as U,h as V}from"./main-BpaYbEPg.js";import{L as A}from"./LoginLeftPanel-B-QNyV8a.js";import{r as N}from"./authService-XNlR-tBG.js";const B={name:"RegisterForm",props:{loading:{type:Boolean,default:!1}},emits:["submit","login"],setup(g,{emit:e}){const r=c(1),o=c(null),y=c(""),l=c({company_name:"",company_type:"",company_logo:null,email:"",password:"",password_confirmation:"",tel_number:""});return{currentStep:r,formData:l,logoPreview:o,logoFileName:y,nextStep:()=>{if(!l.value.company_name||!l.value.company_type){alert("Please fill in all required fields");return}r.value=2},prevStep:()=>{r.value=1},handleFileUpload:d=>{const n=d.target.files[0];if(!n)return;l.value.company_logo=n,y.value=n.name;const m=new FileReader;m.onload=R=>{o.value=R.target.result},m.readAsDataURL(n)},handleSubmit:()=>{const d=new FormData;Object.keys(l.value).forEach(n=>{n==="company_logo"&&l.value[n]!==null?d.append("company_logo",l.value[n],l.value[n].name):l.value[n]!==null&&l.value[n]!==void 0&&d.append(n,l.value[n])}),console.log("FormData contents:");for(let n of d.entries())console.log(n[0]+": "+(n[1]instanceof File?`File: ${n[1].name} (${n[1].type})`:n[1]));e("submit",d)}}}},M={key:0},q={class:"form-group"},E={class:"form-group"},j={class:"form-group file-upload"},H={for:"company_logo",class:"file-label"},I={key:0,class:"logo-preview"},G=["src"],O={key:1},J={class:"form-group"},K={class:"form-group"},X={class:"form-group"},Y={class:"form-group"},z={class:"button-group"},Q=["disabled"],W={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Z={class:"signup-link"};function $(g,e,r,o,y,l){return s(),i("form",{onSubmit:e[10]||(e[10]=h((...a)=>o.handleSubmit&&o.handleSubmit(...a),["prevent"])),class:"login-form",enctype:"multipart/form-data"},[o.currentStep===1?(s(),i("div",M,[e[12]||(e[12]=t("h3",{class:"step-title"},"Company Information",-1)),t("div",q,[v(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>o.formData.company_name=a),placeholder:"Company Name",required:""},null,512),[[_,o.formData.company_name]])]),t("div",E,[v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>o.formData.company_type=a),required:"",class:"form-select"},e[11]||(e[11]=[F('<option value="" disabled selected data-v-1d8d6618>Select Company Type</option><option value="broiler" data-v-1d8d6618>Broiler</option><option value="slaughterhouse" data-v-1d8d6618>Slaughterhouse</option><option value="sme" data-v-1d8d6618>SME</option><option value="logistic" data-v-1d8d6618>Logistic</option>',5)]),512),[[C,o.formData.company_type]])]),t("div",j,[t("label",H,[t("span",null,b(o.logoFileName||"Upload Company Logo (Optional)"),1),t("input",{type:"file",id:"company_logo",onChange:e[2]||(e[2]=(...a)=>o.handleFileUpload&&o.handleFileUpload(...a)),accept:"image/*",class:"file-input"},null,32)]),o.logoPreview?(s(),i("div",I,[t("img",{src:o.logoPreview,alt:"Company Logo Preview"},null,8,G)])):u("",!0)]),t("button",{type:"button",class:"login-btn",onClick:e[3]||(e[3]=(...a)=>o.nextStep&&o.nextStep(...a))}," NEXT ")])):u("",!0),o.currentStep===2?(s(),i("div",O,[e[14]||(e[14]=t("h3",{class:"step-title"},"Admin Account",-1)),t("div",J,[v(t("input",{type:"email","onUpdate:modelValue":e[4]||(e[4]=a=>o.formData.email=a),placeholder:"Email",required:""},null,512),[[_,o.formData.email]])]),t("div",K,[v(t("input",{type:"tel","onUpdate:modelValue":e[5]||(e[5]=a=>o.formData.tel_number=a),placeholder:"Phone Number",required:""},null,512),[[_,o.formData.tel_number]])]),t("div",X,[v(t("input",{type:"password","onUpdate:modelValue":e[6]||(e[6]=a=>o.formData.password=a),placeholder:"Password",required:""},null,512),[[_,o.formData.password]])]),t("div",Y,[v(t("input",{type:"password","onUpdate:modelValue":e[7]||(e[7]=a=>o.formData.password_confirmation=a),placeholder:"Confirm Password",required:""},null,512),[[_,o.formData.password_confirmation]])]),t("div",z,[t("button",{type:"button",class:"back-btn",onClick:e[8]||(e[8]=(...a)=>o.prevStep&&o.prevStep(...a))}," BACK "),t("button",{type:"submit",class:"login-btn",disabled:r.loading},[r.loading?(s(),i("span",W)):u("",!0),e[13]||(e[13]=S(" REGISTER "))],8,Q)])])):u("",!0),t("div",Z,[e[15]||(e[15]=S(" Already have an account? ")),t("a",{href:"#",onClick:e[9]||(e[9]=h(a=>g.$emit("login"),["prevent"]))},"sign in")])],32)}const ee=x(B,[["render",$],["__scopeId","data-v-1d8d6618"]]),oe={name:"RegisterPage",components:{LoginLeftPanel:A,RegisterForm:ee},setup(){const g=U();V();const e=c(!1),r=c(null),o=c(null);return{loading:e,error:r,successMessage:o,animatedTexts:["Join our Halal business community","Connect with verified Halal businesses","Grow your Halal business network","Access exclusive Halal resources"],handleRegister:async w=>{var p,f,d,n;e.value=!0,r.value=null,o.value=null;try{const m=await N(w);o.value=m.message||"Registration successful! Your account is pending approval. Redirecting to login page...",setTimeout(()=>{g.push({name:"Login"})},3e3)}catch(m){console.error("Registration error:",m),(f=(p=m.response)==null?void 0:p.data)!=null&&f.errors?r.value=m.response.data.errors:r.value=((n=(d=m.response)==null?void 0:d.data)==null?void 0:n.message)||"Registration failed. Please try again."}finally{e.value=!1}},goToLogin:()=>{g.push({name:"Login"})}}}},te={class:"login-container"},ae={class:"login-card"},ne={class:"right-panel"},le={key:0,class:"alert alert-success w-100 mb-4"},se={key:1,class:"alert alert-danger w-100 mb-4"},re={key:0},ie={key:1,class:"mb-0 ps-3"};function de(g,e,r,o,y,l){const a=D("login-left-panel"),w=D("register-form");return s(),i("div",te,[t("div",ae,[L(a,{texts:o.animatedTexts},null,8,["texts"]),t("div",ne,[e[2]||(e[2]=t("h2",null,"Create Account",-1)),e[3]||(e[3]=t("p",null,"Register to join our community",-1)),o.successMessage?(s(),i("div",le,[e[0]||(e[0]=t("i",{class:"fas fa-check-circle me-2"},null,-1)),S(" "+b(o.successMessage),1)])):u("",!0),o.error?(s(),i("div",se,[e[1]||(e[1]=t("i",{class:"fas fa-exclamation-circle me-2"},null,-1)),typeof o.error=="string"?(s(),i("span",re,b(o.error),1)):typeof o.error=="object"?(s(),i("ul",ie,[(s(!0),i(P,null,T(o.error,(p,f)=>(s(),i("li",{key:f},[t("strong",null,b(f)+":",1),S(" "+b(Array.isArray(p)?p.join(", "):p),1)]))),128))])):u("",!0)])):u("",!0),o.successMessage?u("",!0):(s(),k(w,{key:2,loading:o.loading,error:null,onSubmit:o.handleRegister,onLogin:o.goToLogin},null,8,["loading","onSubmit","onLogin"]))])])])}const ce=x(oe,[["render",de],["__scopeId","data-v-a329a08b"]]);export{ce as default};
